import{r,j as e,a as b,K as l,c as j,L as v}from"./index-BRnPnvLZ.js";import{u as y}from"./index.esm-CJkZBfoR.js";import{a as w}from"./actions-CuqEsQch.js";import{_ as c}from"./dialog-CxU_RTVD.js";import"./constants-qZa9FZnL.js";class N extends r.Component{constructor(s){super(s),this.state={hasError:!1}}static getDerivedStateFromError(s){return{hasError:!0}}componentDidCatch(s,t){console.error("ErrorBoundary caught an error:",s,t)}render(){return this.state.hasError?e.jsx("div",{children:"Something went wrong."}):this.props.children}}const F=()=>{const[o,s]=r.useState(!1),[t,i]=r.useState(null),a=b(),{register:n,handleSubmit:x,formState:{errors:d}}=y(),u=()=>{s(!1)},h=()=>{s(!0)},p=async f=>{const{name:g}=f,m=await w(a,{name:g});m.ok?s(!1):i(m.error)};return e.jsxs(e.Fragment,{children:[e.jsx("button",{id:"newProjectBtn",type:"button",onClick:h,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-opacity-95 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75",children:"New Project"}),e.jsx(l,{appear:!0,show:o,as:r.Fragment,children:e.jsxs(c,{as:"div",className:"relative z-10",onClose:u,children:[e.jsx(l.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(l.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(c.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[e.jsx(c.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:"Create new project"}),e.jsx("div",{className:"mt-2",children:e.jsxs("form",{onSubmit:x(p),children:[t&&e.jsx("span",{children:t}),e.jsx("input",{id:"name",type:"text",placeholder:"Enter project name...",autoFocus:!0,...n("name",{required:!0}),className:`w-full border rounded-md py-2 px-3 my-4 text-gray-700 leading-tight focus:outline-none focus:border-blue-500 focus:shadow-outline-blue ${d.name?"border-red-500":""}`}),d.name&&e.jsx("span",{children:"This field is required"}),e.jsx("button",{id:"submitNewProjectBtn",type:"submit",className:"inline-flex justify-center rounded-md border border-transparent bg-blue-600 px-4 py-2 mr-2 text-sm font-medium text-white hover:bg-blue-500 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",children:"Submit"}),e.jsx("button",{type:"submit",onClick:u,className:"inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",children:"Cancel"})]})})]})})})})]})})]})};function P(){const o=j(),{projects:s,isLoading:t,isError:i,errorMessage:a}=o;return console.log(s),s.length===0&&t?e.jsx("span",{children:"Loading..."}):i?e.jsx("span",{children:a}):e.jsx(e.Fragment,{children:s.map(n=>e.jsx(v,{to:`${n.id}`,className:"block p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100",children:e.jsx("h5",{className:"mb-2 text-xl font-medium tracking-tight text-gray-900 ",children:n.name})},n.id))})}const S=()=>e.jsx("div",{className:"grid gap-4 grid-cols-4 mt-5",children:e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"suspense-loading",children:"Loading..."}),children:e.jsx(P,{})})}),B=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h2",{className:"text-2xl font-medium tracking-tight",children:"Projects"}),e.jsx(F,{})]}),e.jsx(N,{children:e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"suspense-loading",children:"Loading..."}),children:e.jsx(S,{})})})]});export{B as default};
